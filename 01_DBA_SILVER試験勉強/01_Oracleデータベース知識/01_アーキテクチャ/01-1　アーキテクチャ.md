# Oracle データベースのアーキテクチャ

## 1. データベースの基本構造
![[Pasted image 20250601135654.png]]

## 2. メモリ構造

### 2.1 SGA（System Global Area）
共有メモリ領域で、以下のコンポーネントで構成されます：

#### データベースバッファキャッシュ
- データファイルから読み込んだデータブロックをキャッシュ
- 変更されたブロックを一時的に保持
- DBWnプロセスによりデータファイルに書き戻し

#### REDOログバッファ
- 変更前のREDOデータを一時的に保存
- LGWRプロセスによりREDOログファイルに書き込み
- アーカイブログの生成（ARCnプロセス）

#### 共有プール
- 解析済みのSQL文をキャッシュ
- データディクショナリ情報をキャッシュ
- 実行計画の共有

#### Javaプール
- Javaストアドプログラムの実行用メモリ領域

#### ラージプール
- バックアップ処理用の作業領域
- 並列処理用の作業領域

### 2.2 PGA（Program Global Area）
- サーバプロセス専用のメモリ領域
- セッション確立時に割り当て
- ソート領域やハッシュ結合用のメモリを含む

![[Pasted image 20250521230930.png]]

## 3. プロセス構造

### 3.1 サーバプロセス
![[Pasted image 20250521230831.png]]
主な役割：
- データファイルからのデータブロック読み込み
- バッファキャッシュへのデータ配置
- データブロックの変更
- REDOログバッファへのREDOデータ書き込み

### 3.2 バックグラウンドプロセス
- DBWn：データベースライター（バッファキャッシュ→データファイル）
- LGWR：ログライター（REDOログバッファ→REDOログファイル）
- ARCn：アーカイバ（REDOログファイル→アーカイブログ）

## 4. RAC（Real Application Clusters）構成
- 複数インスタンスが共有ストレージにアクセス
- 可用性の向上
- スケーラビリティの向上
- データベースとインスタンスは1対1以上の関係

## 5. セッション管理
- 同一ユーザによる複数セッション接続可能
- 複数ユーザによる複数セッション接続可能

## 6. 重要な制約
- セグメントはデータファイルをまたがることが可能
- セグメントは表領域をまたがることができない