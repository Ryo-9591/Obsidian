# Oracle データベースの構造
![[Pasted image 20250601135654.png]]
# 共有メモリ(SGA：System Global Area)
## データベースバッファキャッシュ
## REDOログバッファ
REDOろぐｘｔ
## 共有プール
解析済みのSQLやデータディクショナリの情報などをキャッシュ
## Javaプール
ストアドプログラムの実行に使用
## ラージプール
バックアップや並列処理などの作業領域



# RAC構成

異なるデータベースサーバー上で起動する複数のインスタンスが共有ストレージ装置に配置された1組のデータファイルにアクセスする構成
→可用性が上がる

2つのデータベースが1つの共有のインスタンスをみたいなことはできない
→データベース：インスタンスが1対1以上の関係になるため

---
# Oracle Serverアーキテクチャ

同じユーザ名を使用して句数のセッションを張ることも、
複数ユーザーで複数セッション貼ることもできる

---
# SGAとPGAの対応

![[Pasted image 20250521230930.png]]

SGA：共有するメモリ領域
PGA：サーバプロセス内のメモリ構造。セッションが確立すると割り当てられる。

---
# SGAコンポーネント

## データベースバッファキャッシュ

![[Pasted image 20250522080048.png]]
データファイルから読み取られたデータブロックをコピーして格納する
## DBWn(データベースライター)
データベースバッファキャッシュに格納された変更済みのデータブロックをDBWnにより、あとでデータファイルに書き込まれる

---
## REDOログバッファ

![[Pasted image 20250522081348.png]]

変更処理が実行！

①REDOログバッファにREDOを書き込む(サーバプロセス)
②COMMITが実行されるとREDOをREDOログファイルに書き込む(LGWR(ログライター))
③ログスイッチが発生すると、REDOログファイルをアーカイブする(ARCn(アーカイバプロセス))

---
# サーバープロセス

![[Pasted image 20250521230831.png]]
・データファイルからデータブロックを読み込み、バッファキャッシュに配置する。
・データベースバッファキャッシュに配置されたデータブロックの変更
・REDOログバッファにREDOを書き込む

セグメントはデータファイルにまたがることはできるが、表領域を跨ぐことはできない