# DBCA(Database Configuration Assistant)

## ①標準構成を用いたデータベースの作成

1. グローバルデータベース名
2. 記憶域タイプ　　　　　　　ファイルシステム or 自動ストレージ管理
3. データファイルの位置　　　ファイルシステムならディレクトリパス、自動ストレージ管理ならASMディスクグループ名
4. 高速リカバリ領域　　　　　バックアップのリカバリ領域を指定
5. 管理者パスワード
6. コンテナ・データベースとしても作成
7. キャラクタセットの選択は不可
8. OMF（Oracle Managed Files）の有効化は自動
## ②拡張構成を用いたデータベースの作成

1. デプロイタイプ　　　　データベースの作成時のテンプレートを指定
2. データベース識別情報　グローバルデータベース名とSIDを指定
3. 記憶域オプション　　　ファイルシステム or 自動ストレージ管理、OMFを使用するかも
4. 高速リカバリ　　　　　リカバリのサイズの指定、アーカイブログモードにするかどうか
5. ネットワーク　　　　　リスナーを指定
6. Oracle Data Vault　　　 Oracle Data Vault、Oracle Label Securityを使用するか
7. 構成オプション　　　　メモリー領域のサイズ、データブロックのサイズ、起動プロセスの最大数、キャラクタセット、サンプルスキーマ
8. 管理オプション　　　　Em Expressを構成するか、Enterprise Manager Cloud Controlの管理対象に登録するか
9. ユーザ資格証明　　　　SYS,SYSTEMのパスワードを入力する
10. OMF（Oracle Managed Files）を明示的にON/OFFできる

## ③既存データベースの構成変更　

1. 専用サーバ構成から共有サーバ構成への変更
2. データベースを複製するためのテンプレートを作成

④データベース削除
⑤テンプレの作成と削除
⑥PDBの管理
## Enterprise Manager Cloud Controlへの登録の条件

利用可能なEnterprise Manager Management サーバーが存在し、
ホストにOracle Management Agentもインストールされている場合

---
# SYSユーザとSYSTEMユーザの違い

| 項目      | SYSユーザー             | SYSTEMユーザー        |
| ------- | ------------------- | ----------------- |
| 用途      | Oracleの**内部管理専用**   | 通常の**DB管理用アカウント** |
| データ所有   | データディクショナリを所有       | 一般的な管理テーブルを管理     |
| ログイン方式  | 必ず `AS SYSDBA` が必要  | 通常のパスワードログインでOK   |
| 誤操作のリスク | 超高い（Oracle全体を壊す可能性） | 比較的低い             |
SYSTEMユーザは**DB作成時に自動生成され、一般管理タスク（表領域作成など）に使用**される

---
# SQL *Plus

外部ツールだけど、データベースがオープンしてないと使用できない
## ①起動、ログイン

### systemユーザ(データベース接続あり)
sqlplus system/Password123

### systemユーザ(データベースなし)
sqlplus /nolog
CONNECT system/Password123

### sysユーザ
sqlplus sys/Password123 ==as sysdba==

sysユーザは権限を持ちすぎるのであえてsysdbsで入る
### sysユーザ(OS認証)
sqlplus / as sysdba

## ②コマンド集
覚え方：Hu-Desc 
HU1 DE2 S4 C2

| SQL*Plusコマンド | コマンド説明                     | 使用例                                            |
| ------------ | -------------------------- | ---------------------------------------------- |
| @(アットマーク)    | 指定したスクリプトのSQL*Plus文を実行     | @PRINTRPT  <br>@WKRPT.QRY                      |
| COLUMN       | 特定列の表示設定を指定                | COLUMN TYPE_NAME  <br>FORMAT A30               |
| CONNECT      | 指定したユーザー名でデータベースへ接続        | CONNECT user/user_pass                         |
| DEFINE       | ユーザー変数または定義定数の設定と表示        | DEFINE ID = USER_NAME                          |
| DESCRIBE     | 指定したファンクションまたはプロシージャの仕様を表示 | DESCRIBE employee_list                         |
| EXECUTE      | PL/SQLサブプログラムを実行           | EXECUTE dbms_output.  <br>put_line(‘プロシージャ実行’) |
| EXIT         | SQL*Plusを終了                | EXIT                                           |
| HOST         | シェルでコマンドの実行                | HOST dir *.sql                                 |
| SET          | システム変数を設定                  | SET DEFINE                                     |
| SHOW         | 現行のSQL*Plus環境や値を表示         | SHOW REL                                       |
| SHUTDOWN     | Oracle Databaseインスタンスを停止   | SHUTDOWN                                       |
| STARTUP      | Oracle Databaseインスタンスを起動   | STARTUP                                        |
| UNDEFINE     | ユーザー定義定数の削除                | UNDEFINE USER_ID                               |

---
# SQL Developer

外部ツール

1. インスタンスの起動停止
2. 初期化パラメータの設定
3. データベースの起動状態確認
4. データのインポートエクスポート(Data Pump)　GUI操作
5. データベースのバックアップとリカバリ(RMAN)　GUI操作
6. セキュリティの構成(ユーザ、権限、ロールなど)
7. 記憶域の設定(表領域、データファイル管理)
8. SQLスクリプトの実行
9. SQLチューニングアドバイザ　GUI実行

---
# EM Express

DBCAで選択して使える、データベースとポート(https://<ホスト名>:5500/em)で接続する(1対1)
内部ツール(データベースがオープンしていないと使えない)

1. 初期化パラメータの編集  
2. 表領域の管理（作成、変更、削除）  
3. UNDO管理（表領域の切替え、分析パラメータの編集）  
4. REDOログファイルの管理（追加、削除、多重化）  
5. 制御ファイルの管理（トレースにバックアップ）  
6. ユーザーの管理（作成、変更、削除）  
7. ロールの管理（作成、削除）  
8. ADDMによって検出されたパフォーマンスの結果と推奨事項の表示  
9. AWRに取得した統計の表示  
10. SQLチューニングアドバイザの実行

---
# Oracle Enterprise Manager Cloud Control

DBCAから条件(OMS（Oracle Management Service）とOMA（Agent）)ありで登録可能
外部ツール(データベースオープンじゃなくてもいい)
管理対象は、OMA、OMS、リポジトリデータベース

1. ﻿インスタンス （データベース）の起動／停止
2. ﻿﻿Oracle Net Services の設定
3. ﻿スキーマ（表／素引など）の管理
4. ﻿ジョブの管理および実行
5. ﻿バックアップ／リカバリ
6. ﻿データベースリソースマネージャ
7. ﻿パッチ推奨（My Oracle Support パッチ取得）