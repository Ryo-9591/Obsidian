# SQL* Loader
OSファイルシステム上のデータをOracleデータベースの表にロードするツール
![[Pasted image 20250517084154.png]]
# SQL Loaderの動作

## ①ロード先の表明やデータファイルの形式を制御ファイルに記載

制御ファイルの記述例(sample.ctl)：
`LOAD DATA`
`INFILE 'data.csv'`　--データファイルはdata.csv
`INFO TABLE tbl01`　--ロード先の表
`APPEND`　--ロード方法(追加ロード)
`FIELDS TERMINATED BY ' , '`　--カンマ区切りでフィールドに分割
`(no , name)`　--フィールドデータをno列、name列にロード
### ロード方法
#### APPEND
ロード先に追加する形でロード
#### TRUNCATE
ロード先の表をTRUNCATEしてからロード
#### REPLACE
ロー先の表のデータをDELETEしてからロード
## ②「sqlldr」コマンドで制御ファイルをもとにOracleデータベースにロード

`sqlldr user1/pass1 control='sample.ctl'`
## ③ロード処理が終わるとログファイル、廃棄ファイル、不良ファイルが出力
### ログファイル
動作内容が記録されたファイル
### 廃棄ファイル
ロード対象外のレコードを出力
### 不良ファイル
エラーによりロードされなかったデータを出力
# SQL Loaderエクスプレスモード
制御ファイルなしでデータをロードできる機能

`sqlldr user1/pass1 TABLE=data`
## 特徴

・制御ファイルを使用しない
・TABLEで指定したテーブル名.datでロードされる
・自動的にAPPENDモード
・ロードの並列度も自動で設定

## ログファイルに生成される内容

・実行した処理に対応する制御ファイルの内容
→エキスプレスモードでない場合の実行をしたときに使えるように出力される
・内部で実行されるSQLの内容
→SQLスクリプトではない

---
# 外部表

外部ファイルを表のように扱うことができる仕組み
csvファイルにSELECT文が実行できる
## ORACLE_LOADERアクセスドライバ

サーバ内の外部ファイルをデータベースの表にロードすることなくSELECT文で問い合わせることができる

## ORACLE_DATAPUMPアクセスドライバ

複雑な問い合わせ結果をダンプファイルとしてアンロードして別のデータベースに転送してロードできる