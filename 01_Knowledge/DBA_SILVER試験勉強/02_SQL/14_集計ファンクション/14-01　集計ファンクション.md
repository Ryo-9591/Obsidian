# COUNT
COUNT( * )
COUNT(dep_id)
COUNT(DISTINCT )




# GROUP BY

SELECT AVG(・・・) FROM employees;
→単一行変える

SELECT AVG(・・・) FROM employees GROUP BY job_id;
→GROUP BYでくくられたグループの数分値が返る

SELECT MIN(AVG(salary)) FROM employees GROUP BY job_id;
→GROUP BYでくくられた数分AVGが出て、その中のMINが返る

---
# HAVING

## ①エラーパターン

SELECT COUNT(department_id) 
FROM employees 
WHERE commission_pct  IS NOT NULL AND count(department_id)>4 
GROUP BY department_id;  

→==commission_pct  IS NOT NULL==を評価して同時に==count(department_id)>4==の評価もする
→でもこの時点では「COUNT」はまだ存在していない（`GROUP BY`すら始まっていない）から 
→ エラーになる。

## ②正常パターン

SELECT COUNT(department_id) 
FROM employees 
WHERE commission_pct  IS NOT NULL 
GROUP BY department_id 
HAVING count(department_id) >4;  

・WHERE句 → 集計前に「commission_pctがNULLでない行だけ残す」
・GROUP BY → department_idごとにグループ化
・HAVING → 集計後に「そのグループの件数が5件以上」のグループだけ残す

## ③エラーパターン

SELECT job_id, COUNT(department_id) 
FROM employees 
WHERE commission pct IS NOT NULL 
GROUP BY department_id 
HAVING count(*)>4;

→job_idは集計関数に入っていないのでエラーになる
→==GROUP BY を使う場合のみ==非集計カラムは GROUP BY に含める必要がある。

---
