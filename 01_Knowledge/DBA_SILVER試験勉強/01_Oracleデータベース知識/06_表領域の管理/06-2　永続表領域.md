# 永続表領域
表や索引などに対応するオブジェクトを通常のセグメントに格納し管理
・１つ以上のデータファイルからなる
# 永続表領域の種類
役割に応じた永続表領域がある
## SYSTEM表領域
・データディクショナリを格納
・常にオンラインである必要がある
## SYSAUX表領域
・SYSTEM表領域の補佐
・管理情報を格納
# 永続表領域の作成パターン
## 永続表領域の作成(smallfile表領域、ローカル管理、エクステントサイズ自動)

`CREATE TABELSPACE mytbs`
`DATAFILE '/u1/app/oracle/mytbs01.dbf'　--１つ目`
`SIZE 100M`
`AUTOEXTEND OFF ,　--データファイル自動拡張OFF`
`'/u1/app/oracle/mytbs02.dbf'　--２つ目`
`SIZE 200M`
`AUTOEXTEND ON 　--データファイル自動拡張ON`

・「EXTENT MANAGEMET DICTIONARY」の指定がないためローカル管理
・エクステント割り当てはデフォルト「AUTOALLOCATE」になるので64KB,128KBなどからエクステントごとに自動的にサイズを決定
・均一サイズにするには「UNIFORM」を指定する必要がある
### ローカル管理方式
様々な機能が使える
- エクステント割り当ての自動化
- 自動セグメント領域管理(ASSM)
- bigfile表領域
- 遅延セグメント作成
- セグメント縮小→「ALTER TABLE SHRINK SPACE文」
### エクステントの割り当てタイプ
#### AUTOALLOCATE
- Oracleがサイズを自動調整（64K〜1MB以上）
- UNDO表領域は常にこれ
#### UNIFORM
- 均一サイズ（例：UNIFORM SIZE 128K）を明示的に指定
- 一時表領域は常にこれ
## 永続表領域の作成(smallfile表領域、ディクショナリ管理)

`CREATE TABLESPACE example_ts`
`DATAFILE '/u01/app/oracle/oradata/ORCL/example01.dbf'` 
`SIZE 50M`
`EXTENT MANAGEMENT DICTIONARY`

・「EXTENT MANAGEMET DICTIONARY」の指定があるためディクショナリ管理
### ディクショナリ管理方式
・ローカル管理の下位互換
・エクステント情報はデータディクショナリ表（SYSTEM表領域）で管理
## 永続表領域の作成(smallfile表領域、OMF管理)

`CREATE TABLE PAYMENT_TBS;`

・DATAFILEの指定がないためOMF管理
## 永続表領域の作成(bigfile表領域)

`CREATE TABLESPACE bigtbs` 
`DATAFILE '/u01/app/oracle/bigtbs.dbf'` 
`SIZE 50G`

・1つのデータファイルだけで構成
・smallfile表領域への変更はできない
# 永続表領域の削除パターン
## 永続表領域の削除(OMF管理ない)

`DROP TABLESPACE D01;`

・制御ファイルから消えるがデータベースディクショナリからは消えない
## 永続表領域の削除(OMF管理ない)

`DROP TABLESPACE D01 INCLUDING CONTENTS AND DATAFILES;`

・制御ファイル、データベースディクショナリともに消える
## 永続表領域の削除(OMF管理)

`DROP TABLESPACE D01;`

・制御ファイル、データベースディクショナリともに消える

---
# 表領域作成時のブロックサイズ
## 特に指定なし
「DB_BLOCK_SIZE初期化パラメータ」で指定したブロックサイズ
## 指定する
「DB_nK_CACHE_SIZE 初期化パラメータ」で指定したブロックサイズ
