# ロール管理
## 1. ロールの概要
- 複数の権限をまとめて付与・管理する仕組み
- 権限管理の効率化と簡素化を実現
## 2. ロールの基本操作
### 2.1 ロールの作成
```sql
CREATE ROLE <ロール名>;
```

### 2.2 ロールの削除
```sql
DROP ROLE <ロール名>;
```

### 2.3 ロールの付与
```sql
GRANT <ロール名> TO <ユーザー名>;
```

## 3. ロールの階層

### 3.1 ロールの継承
- ロールを他のロールに付与可能
- 継承されたロールは自動的に有効

### 3.2 付与例
```sql
-- ロールAをロールBに付与
GRANT role_A TO role_B;

-- ロールBをユーザーに付与
GRANT role_B TO user01;
```

## 4. ロールの制御

### 4.1 パスワード保護付きロール
- 作成方法：
```sql
CREATE ROLE secure_role IDENTIFIED BY mypass;
```
- 特徴：
  - ログイン時に自動で無効
  - SET ROLE文で有効化可能
  - セッション中のみ有効

### 4.2 ロールの有効/無効切り替え
- デフォルトロール：ログイン時に自動で有効
- パスワード保護付きロール：手動で有効化が必要

## 5. 権限分析

### 5.1 DBMS_PRIVILEGE_CAPTURE
- 不要な権限付与の分析機能
- 分析対象：
  1. 全データベース（SYSユーザー以外）
  2. 特定のロールを持つユーザー
  3. 特定のコンテキストを満たすユーザー
  4. ロールとコンテキストの両方を満たすユーザー

### 5.2 分析結果の確認
- DBA_USED_PRIVSビュー
- DBA_UNUSED_PRIVSビュー
- DBA_USED_OBJPRIVSビュー
- DBA_UNUSED_OBJPRIVSビュー