# ユーザー管理

## 1. 管理者ユーザー
### 1.1 SYSユーザー
- データベースの起動/停止を含むすべての権限を持つ
- Oracleデータディクショナリの所有者
- SYSDBA権限を持つ
- DBAロールを持つ（ユーザー作成権限など）
- 削除不可
### 1.2 SYSTEMユーザー
- データベースの起動/停止は不可
- その他の権限を持つ
- DBAロールを持つ（ユーザー作成権限など）
- 削除不可
## 2. ユーザー作成
### 2.1 前提条件
- CREATE USER権限が必要
### 2.2 作成例
```sql
CREATE USER user01                                  -- ユーザー名
  IDENTIFIED BY Password123                 -- 認証方法：パスワード
  DEFAULT TABLESPACE tbs01                 -- デフォルト表領域
  TEMPORARY TABLESPACE temp          -- 一時表領域
  QUOTA 10M ON tbs01                               -- tbs01 表領域に10MB使用可能
  QUOTA UNLIMITED ON tbs02                -- tbs02 表領域に無制限で使用可能
  PROFILE DEFAULT                                      -- プロファイル：DEFAULT を適用
  PASSWORD EXPIRE                                    -- パスワード：期限切れ状態で作成
  ACCOUNT UNLOCK;                                   -- アカウント：アンロック状態（使用可能）
```
## 3. 認証方法
### 3.1 一般ユーザーの認証

#### 3.1.1 データベース認証（パスワード認証）
- データディクショナリに格納したユーザー情報で認証
- 接続例：`sqlplus user01/Password123`
#### 3.1.2 OS認証
- OSに接続できるユーザーはデータベースにも接続可能
- 設定手順：
  1. ユーザー作成：`CREATE USER ops$u2 IDENTIFIED EXTERNALLY;`
  2. OSに接続：`ssh u2@server01`
  3. データベース接続：`sqlplus /`
### 3.2 管理者ユーザーの認証
#### 3.2.1 OS認証
- OSの特定グループ（dba、oper）所属で認証
#### 3.2.2 パスワードファイル認証
- パスワードファイル（`<ORACLE_HOME>/dba/orapw<ORACLE_SID>`）で認証
- REMOTE_LOGIN_PASSWORDFILE初期化パラメータがexclusiveまたはsharedである必要あり
## 4. クオータ管理
### 4.1 概要
- 永続表領域のみに設定可能
- 記憶割り当て制限を設定
### 4.2 設定例
```sql
QUOTA 10M ON tbs01    -- tbs01に最大10MB
QUOTA UNLIMITED ON tbs02    -- tbs02に無制限
```
### 4.3 注意点
- 一時表領域、UNDO表領域にはクオータ設定不可
- UNLIMITED TABLESPACEシステム権限で全表領域に無制限アクセス可能
- ロールにはUNLIMITED TABLESPACE権限を付与不可
## 5. セキュリティ強化
### 5.1 推奨設定
1. 監査機能の有効化
2. 不要な権限の付与制限
3. 未使用アカウントのロック
4. 複雑なパスワードの使用
5. 危険な初期化パラメータの適切な設定