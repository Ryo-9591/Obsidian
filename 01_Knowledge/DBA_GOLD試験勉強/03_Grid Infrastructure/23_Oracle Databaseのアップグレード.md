# Oracle Databaseアップグレード手順
①新しいリリースのOracle Databaseソフトウェアをインストールする
②データベース外部のファイル(Oracle Net Servicesの設定ファイルなど)を新しい環境に引き継ぐ
③古いリリースのOracleデータベースに格納されたデータを引き継ぐ
## パターン①
DBUA(Database Upgrade Assistant), AutoUpgradeかアップグレードスクリプトを実行
→データベースそのものを変換するから直接アップグレードという
※現行と新サーバーは同じOS,CPU種別である必要がある
## パターン②
Data Pumpなどを用いて新しいリリースにデータを転送する

# DBUA実行される処理

### ①データベースアップグレード前の作業
・前提チェック
・無効なオブジェクトが存在していないか
・アップグレード後のタイムゾーンファイルが適切か
・リカバリが必要なデータファイルが存在していないか
・リフレッシュ中のマテリアらいぜどびゅーが存在していないか
### ②データベースアップグレード後の作業
#### 必須事項
・環境変数ORACLE_HOME及びPATHの変更
・新しいORACLE_HOMEのOPatchコマンドを実行
・/etc/oratabファイルのORACLE_HOMEの変更
・無効なオブジェクトをutlrp.sqlスクリプトで再利用可能に
・utluptabdata.sqlスクリプトでOracle管理タイプに依存する表のアップグレード
・RMANリカバリカタログのアップグレード
#### 推奨事項
・データベースのバックアップ
・アップグレード後修正スクリプトpostupgrade_fixups.sqlの実行
・ディクショナリおよび固定オブジェクトのオプティマイザ統計の収集
・一部ユーザのパスワード再設定
・表領域使用率メトリックの閾値の再設定

# catcon.plスクリプト
マルチテナント環境の際に全コンテナにutlrp.sqlをうてる
Oracleホーム内のPerlを使用

# アップグレードの注意点
・アップグレード後のOracle DatabaseをインストールするOracleホームはアップグレード前のOracle DatabaseのOracleホームとは別の場所にする必要がある
・19cOracleDBにアップグレード可能なリリースは11.2.0.4,  12.1.0.2 , 12.2.0.1 , 18c
・アップグレード前に必ずパッチを適用する必要がある
・アップグレード前後でデータベースキャラセットは同一になります
# 